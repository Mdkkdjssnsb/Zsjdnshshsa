<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bing Image Generator</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            background-color: #f5f5f5; /* Default background color */
            font-family: Arial, sans-serif; /* Default font family */
            margin: 0;
            padding: 0;
        }
        /* Colorful background themes */
        .theme1 {
            background-color: #ffc107; /* Yellow theme */
        }
        .theme2 {
            background-color: #2196F3; /* Blue theme */
        }
        /* Animated elements */
        .animated {
            animation-duration: 0.5s;
            animation-name: slideIn;
        }
        @keyframes slideIn {
            from {
                margin-left: 100%;
                width: 300%; 
            }
            to {
                margin-left: 0%;
                width: 100%;
            }
        }
        /* Numbered input boxes */
        .numbered-box {
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 2px solid #333;
            border-radius: 10px;
            text-align: center;
            margin: 5px;
        }
    </style>
</head>
<body>
    <div id="header" class="theme1 animated">
        <!-- Logo and header content here -->
    </div>
    <div>
        <label for="prompt">Enter prompt (default: cat):</label>
        <input type="text" id="prompt" placeholder="e.g., dog, beach, sunset">
    </div>
    <div>
        <label for="apiKey">Enter API Key:</label>
        <input type="text" id="apiKey" placeholder="Your API Key">
    </div>
    <div>
        <label for="numImages">Number of Images:</label>
        <input type="number" id="numImages" min="1" max="10" value="5">
    </div>
    <button id="generate" class="theme2 animated">Generate Images</button>
    <!-- Image uploading -->
    <div>
        <label for="imageUpload">Upload Image:</label>
        <input type="file" id="imageUpload">
    </div>
    <!-- Colorful background themes -->
    <div>
        <label>Select Background Theme:</label>
        <select id="backgroundTheme">
            <option value="default">Default</option>
            <option value="theme1">Yellow Theme</option>
            <option value="theme2">Blue Theme</option>
        </select>
    </div>
    <!-- Numbered input boxes -->
    <div>
        <label>Numbered Boxes for Typing:</label><br>
        <div class="numbered-box">1</div>
        <div class="numbered-box">2</div>
        <div class="numbered-box">3</div>
    </div>
    <div id="loading">Loading...</div>
    <div id="images" class="image-container"></div>
    <div id="error" class="error"></div>
    <div class="footer theme1">
        <!-- Footer content here -->
    </div>

    <script>
        // JavaScript code for handling user interactions and AJAX requests
        $(document).ready(function(){
            $('#generate').click(function(){
                var prompt = $('#prompt').val() || 'cat';
                var apiKey = $('#apiKey').val();
                var numImages = $('#numImages').val();

                // Input validation
                if (!apiKey.trim()) {
                    $('#error').text('Please enter your API Key');
                    return;
                }
                $('#error').empty(); // Clear any previous error message

                $('#loading').show(); // Show loading indicator

                $.ajax({
                    url: '/api/bing',
                    type: 'POST',
                    contentType: 'application/json',
                    headers: {
                        'apiKey': apiKey
                    },
                    data: JSON.stringify({ prompt: prompt, numImages: numImages }),
                    success: function(data){
                        $('#images').empty();
                        if (data.images.length > 0) {
                            data.images.forEach(function(image){
                                var imageBox = $('<div class="image-box"></div>'); // Create image box
                                var img = $('<img src="' + image + '">'); // Create image element
                                imageBox.append(img); // Append image to box
                                $('#images').append(imageBox); // Append box to container
                            });
                        } else {
                            $('#error').text('No images found. Please try a different prompt.');
                        }
                    },
                    error: function(xhr, status, error){
                        $('#images').empty();
                        $('#error').text('Error: ' + xhr.responseJSON.error);
                    },
                    complete: function(){
                        $('#loading').hide(); // Hide loading indicator
                    }
                });
            });

            // Change background theme
            $('#backgroundTheme').change(function(){
                var selectedTheme = $(this).val();
                $('body').removeClass().addClass(selectedTheme);
            });

            // Handle image upload
            $('#imageUpload').change(function(){
                // Code for handling image upload
                alert('Image uploaded successfully!');
            });
        });
    </script>
</body>
</html>
